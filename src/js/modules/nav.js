// мобильное меню

//выпадающее меню для мобильных устройств
document.addEventListener("click", documentActions);

function documentActions(e) {
  const targetElement = e.target;
  if (window.innerWidth > 900) {
    if (targetElement.classList.contains("menu__arrow")) {
      targetElement.closest(".menu__item").classList.toggle("_hover");
    }
    if (
      !targetElement.closest(".menu__item") &&
      document.querySelectorAll(".menu__item._hover").length > 0
    ) {
      // console.log("ehhh");
      // _removeClasses(document.querySelectorAll(".menu__item._hover"), "_hover");
    }
  }
}

// меню бургер
const body = document.querySelector(".page__body");
const iconMenu = document.querySelector(".menu__icon");
const menuBody = document.querySelector(".menu__body");
const menuLink = document.querySelectorAll(".menu__item");
if (iconMenu) {
  iconMenu.addEventListener("click", (e) => {
    body.classList.toggle("_lock");
    iconMenu.classList.toggle("_active");
    menuBody.classList.toggle("_active");
  });
}
// закрытие при клике
if (menuLink.length) {
  menuLink.forEach((item) => {
    item.addEventListener("click", () => {
      removeActiveClass();
    });
  });
}

if (window.innerWidth <= 992) {
  document.addEventListener('click', function (e) {
  if (!menuBody || !iconMenu) return;

  const clickInsideMenu = e.target.closest('.menu__body');
  const clickOnBurger = e.target.closest('.menu__icon');

  // если меню открыто и клик вне меню и не по бургеру
  if (
    menuBody.classList.contains('_active') &&
    !clickInsideMenu &&
    !clickOnBurger
  ) {
    removeActiveClass();
  }
});

}

function removeActiveClass() {
  body.classList.remove("_lock");
  iconMenu.classList.remove("_active");
  menuBody.classList.remove("_active");
}

// активный язык для Polylang
const menuLang = document.querySelector('.menu-languages');
const mediaQuery = window.matchMedia('(max-width: 767px)');
if (menuLang && menuLang.firstElementChild) {
  if (mediaQuery.matches) {
    menuLang.firstElementChild.classList.add('current-languages');
  } else {
    menuLang.firstElementChild.classList.remove('current-languages');
  }
}